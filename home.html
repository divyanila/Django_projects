<!DOCTYPE html>
<html>
  <head>
    
 <style>
   /* Set the size of the div element that contains the map */
#map {
  height: 400px;
  /* The height is 400 pixels */
  width: 100%;
  /* The width is the width of the web page */
}
 </style>

<script>
  // Initialize and add the map
  
window.onload= function event() {
    if(navigator.geolocation){ 
                navigator.geolocation.getCurrentPosition(showPos,showErr); 
                 //Showing Current Poistion on Google Map
        function showPos(position){ 
            latt = position.coords.latitude; 
            long = position.coords.longitude; 
            var lattlong = new google.maps.LatLng(latt, long); 
            console.log(latt);
            console.log(long);
            const uluru = { lat: latt, lng: long };
            const NEW_ZEALAND_BOUNDS = {
              
  north: long - 0.05,
  south: latt-0.05,
  west: long+0.05,
  east: latt+0.05,
};
var locations = [
      ['DESCRIPTION', 41.926979, 12.517385, 3],
      ['DESCRIPTION', 41.914873, 12.506486, 2],
      ['DESCRIPTION', 41.918574, 12.507201, 1]
    ];


const map = new google.maps.Map(document.getElementById("map"), {
    zoom: 11,
    center: { lat: 33.678, lng: -116.243 },
    mapTypeId: "terrain",
  });

  locations1 = [
    ['north',-116.243-0.05],
    ['south',33.678-0.05],
    ['west',-116.243+0.05],
    ['east',33.678+0.05]
  ]
  const rectangle = new google.maps.Rectangle({
    strokeColor: "#FF0000",
    strokeOpacity: 0.8,
    strokeWeight: 2,
   
    fillOpacity: 0.35,
    map: map,
    bounds: {
      north: locations1[0][1],
      south: locations1[1][1],
      east: locations1[2][1],
      west: locations1[3][1],
    },
  });
  google.maps.event.addListener(map, 'click', function(e) {
    console.log(e.latLng)
    var resultColor =
        google.maps.geometry.rect.containsLocation(e.latLng, rectangle) ?
        'black' :
        'green';
    
    if(google.maps.geometry.rect.containsLocation(e.latLng, rectangle)) {
      alert('inside the city');
      console.log("inside the city")
    }
  });
  
  const marker = new google.maps.Marker({
      position:  { lat: 41.926979, lng: 12.517385},
      map: map,
      title:"label1",
        url:"http://127.0.0.1:8000/on",
        draggable: true,
   
      });

    // The map, centered at Uluru
    
        }
  
            }
            else{
                alert("Sorry! your Browser does not support Geolocation API")
            }
        
            function showErr(error) {
              switch(error.code){
              case error.PERMISSION_DENIED:
             alert("User denied the request for Geolocation API.");
              break;
             case error.POSITION_UNAVAILABLE:
             alert("USer location information is unavailable.");
            break;
            case error.TIMEOUT:
            alert("The request to get user location timed out.");
            break;
           case error.UNKNOWN_ERROR:
            alert("An unknown error occurred.");
            break;
           } } 
           
   
  }
  </script>
    <title>Add Map</title>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
   <div>
     <input type="text" id="address"></input>
   </div>
   <div>
     <button id="submit">Click</button>
   </div>
    <!--The div element for the map -->
    <div id="map"></div>
      
    <!-- Async script executes immediately and must be after any DOM elements used in callback. -->
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDrZT29N0YiJfKxHM467Ev-EgDURuse9t8&libraries=&v=weekly"
      async
    ></script>
  </body>
</html>